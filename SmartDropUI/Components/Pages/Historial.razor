@using SmartDropUI.Models
@using SmartDropUI.Services
@inject RiegoService RiegoService

<div class="historial-container">

    <button class="nav-btn" @onclick="IrDashboard">
        Dashboard
    </button>

    <button class="nav-btn logout" @onclick="CerrarSesion">
        Salir
    </button>

    <!-- tabla historial ... -->

</div>

@code {
    [Parameter] public EventCallback OnIrADashboard { get; set; }
    [Parameter] public EventCallback OnCerrarSesion { get; set; }

    private List<DatosRiegoModel> registros = new();
    private bool cargando = false;

    protected override async Task OnInitializedAsync()
    {
        await CargarHistorial();
    }

    private async Task IrDashboard() =>
        await OnIrADashboard.InvokeAsync();

    private async Task CerrarSesion() =>
        await OnCerrarSesion.InvokeAsync();

    private async Task CargarHistorial()
    {
        cargando = true;
        await Task.Delay(1000);

        registros = new()
        {
            new() { Fecha = DateTime.Now.AddHours(-1), Humedad = 45, Temperatura = 22, Estado = "Riego Automático" },
            new() { Fecha = DateTime.Now.AddHours(-3), Humedad = 68, Temperatura = 24, Estado = "Riego Completado" },
        };

        cargando = false;
    }
}
